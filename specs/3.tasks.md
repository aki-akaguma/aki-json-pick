# Development Tasks for aki-json-pick

This checklist is based on the design document and reflects the current implementation status.

## Project Setup & Architecture

- [x] Structure the project as a Rust library and a binary.
- [x] Define project metadata and dependencies in `Cargo.toml`.
- [x] Separate concerns into modules: `conf`, `run`, `util`.

## Configuration (`conf` module)

- [x] Create `Conf` struct to hold all parsed command-line options.
- [x] Implement argument parser for all flags: `-s`/`--select`, `-p`/`--pretty`, `-r`/`--raw-output`, `--color`.
- [x] Implement special handling for `-H`/`--help` to display help text and exit.
- [x] Implement special handling for `-V`/`--version` to display version and exit.

## Core Logic (`run` module)

- [x] Implement the main `execute` function to orchestrate the application flow.
- [x] Read JSON data from the standard input stream.
- [x] Integrate `jql` crate to parse the selector string and apply it to the input.
- [x] Implement logic for pretty-printing JSON output (`-p`).
- [x] Implement logic for raw string output (`-r`).
- [x] Implement logic for colored output (`--color` flag).
- [x] Append a newline to every output record.

## Utilities (`util` module)

- [x] Create a `ColorWhen` enum (`Always`, `Never`, `Auto`) to manage colorization logic.
- [x] Use the `atty` crate to detect TTY for the `auto` color option.
- [x] Define a comprehensive `Errors` enum using `thiserror` for all failure modes.

## Main Executable (`main.rs`)

- [x] Implement the application entry point.
- [x] Connect argument parsing, core execution, and I/O handling.
- [x] Ensure successful operations exit with status code 0.
- [x] Ensure all errors are printed to `stderr` and exit with a non-zero status code.

## Testing & Documentation

- [x] Create a `README.md` with a project description and usage examples.
- [x] Add a doc-test in `lib.rs` as a library usage example.
- [x] Set up CI workflows for automated testing on multiple platforms (macOS, Ubuntu, Windows).
- [ ] Enhance integration tests in the `tests/` directory to cover all CLI flags and error conditions systematically.
